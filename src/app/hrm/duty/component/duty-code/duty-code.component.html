<nz-page-header (nzBack)="goBack()" nzBackIcon nzTitle="근무 코드 관리" nzSubtitle="This is a subtitle"> </nz-page-header>

<div nz-row class="btn-group">
  <div nz-col [nzSpan]="12">
    <nz-input-group nzSearch [nzAddOnBefore]="addOnBeforeTemplate" [nzSuffix]="suffixIconSearch">
      <input type="text" [(ngModel)]="queryValue" nz-input placeholder="input search text" (keyup.enter)="getDutyCodeList()">
    </nz-input-group>
    <ng-template #addOnBeforeTemplate>
        <nz-select [(ngModel)]="queryKey">
          <nz-option [nzLabel]="'근무코드'" [nzValue]="'dutyCode'"></nz-option>
          <nz-option [nzLabel]="'리소스명'"   [nzValue]="'resourceName'"></nz-option>
          <nz-option [nzLabel]="'URL'"        [nzValue]="'url'"></nz-option>
          <nz-option [nzLabel]="'설명'"       [nzValue]="'description'"></nz-option>
        </nz-select>
      </ng-template>
    <ng-template #suffixIconSearch>
      <span nz-icon nzType="search"></span>
    </ng-template>
  </div>
  <div nz-col [nzSpan]="12" style="text-align: right;">
    <button
      nz-button
      (click)="getDutyCodeList()">
      <span nz-icon nzType="search"></span>
      조회
    </button>
    <nz-divider nzType="vertical"></nz-divider>
    <button
      nz-button
      (click)="initForm()">
      <span nz-icon nzType="form" nzTheme="outline"></span>
      신규
    </button>
    <nz-divider nzType="vertical"></nz-divider>
    <button
      nz-button
      nzDanger
      nz-popconfirm
      nzTitle="삭제하시겠습니까?"
      (nzOnConfirm)="deleteDutyCode()"
      (nzOnCancel)="false">
      <span nz-icon nzType="delete" nzTheme="outline"></span>
      삭제
    </button>
  </div>
</div>

<h3 class="pgm-title">근무코드 목록</h3>

<div class="grid-wrapper">
  <app-duty-code-grid #gridDutyCode
    (rowSelected)="selectedItem($event)"
    (editButtonClicked)="editDrawerOpen($event)"
    (rowDoubleClicked)="editDrawerOpen($event)">

  </app-duty-code-grid>
</div>

<nz-drawer
    [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom':'53px' }"
    [nzMaskClosable]="true"
    [nzWidth]="720"
    [nzVisible]="drawerVisible"
    nzTitle="근무코드 등록"
    (nzOnClose)="closeDrawer()">
    <app-duty-code-form
        id="formDutyCode"
        #formDutyCode
        (formSaved)="getDutyCodeList()"
        (formDeleted)="getDutyCodeList()"
        (formClosed)="closeDrawer()">
    </app-duty-code-form>
</nz-drawer>
