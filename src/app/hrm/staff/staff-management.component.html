<app-nz-page-header-custom title="직원정보관리" subtitle="This is a subtitle"></app-nz-page-header-custom>

<div nz-row class="btn-group">

  <div nz-col [nzSpan]="24" style="text-align: right;">
    {{selectedStaff | json}}
    <button nz-button (click)="selectStaffGrid()">
      <span nz-icon nzType="search" nzTheme="outline"></span>조회
    </button>
    <nz-divider nzType="vertical"></nz-divider>
    <button nz-button nzType="primary" (click)="newStaff()">
      <span nz-icon nzType="save" nzTheme="outline"></span>신규직원등록
    </button>
    <nz-divider nzType="vertical"></nz-divider>
    <button nz-button nzType="primary" (click)="newAppoint()">
      <span nz-icon nzType="save" nzTheme="outline"></span>발령등록
    </button>

  </div>
</div>



<div class="app-grid">
  <app-staff-grid
    (rowClickedEvent)="staffGridRowClicked($event)">
  </app-staff-grid>

  <app-staff-regist-form [staffId]="selectedStaff?.staffId">
  </app-staff-regist-form>

  <nz-tabset>
    <nz-tab nzTitle="발령">
      <div style="height:calc(100vh - 310px)">
        <app-staff-appointment-record-grid
          [staffId]="selectedStaff?.staffId">
        </app-staff-appointment-record-grid>
      </div>
    </nz-tab>
  </nz-tabset>
</div>


<nz-drawer
  [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom':'53px' }"
  [nzMaskClosable]="true"
  nzWidth="80%"
  [nzVisible]="staffDrawer.visible"
  nzTitle="직원 등록"
  (nzOnClose)="staffDrawer.visible = false">
    <!-- (formSaved)="getForm(newStaff.selectedRowId)" -->
    <app-new-staff-form *nzDrawerContent
      [initLoadId]="staffDrawer.initLoadId"
      (formSaved)="selectStaffGrid()"
      (formDeleted)="selectStaffGrid()"
      (formClosed)="staffDrawer.visible = false">
    </app-new-staff-form>
</nz-drawer>


<nz-drawer
  [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom':'53px' }"
  [nzMaskClosable]="true"
  nzWidth="80%"
  [nzVisible]="appointmentDrawer.visible"
  nzTitle="발령 등록"
  (nzOnClose)="appointmentDrawer.visible = false">
  <!-- (formSaved)="getTermList()"
      (formDeleted)="getTermList()" -->
    <app-staff-appointment-record-form *nzDrawerContent
      [staff]="selectedStaff"
      [initLoadId]="appointmentDrawer.initLoadId"
      (formClosed)="appointmentDrawer.visible = false">
    </app-staff-appointment-record-form>
</nz-drawer>
