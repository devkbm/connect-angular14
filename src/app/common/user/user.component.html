<nz-page-header (nzBack)="goBack()" nzBackIcon nzTitle="사용자 등록" nzSubtitle="This is a subtitle">
</nz-page-header>

<app-nz-search-area>
  <div nz-col [nzSpan]="12">
    <nz-input-group nzSearch [nzAddOnBefore]="addOnBeforeTemplate" [nzSuffix]="suffixIconSearch">
        <input type="text" [(ngModel)]="queryValue" nz-input placeholder="input search text" (keyup.enter)="getUserList()">
    </nz-input-group>
    <ng-template #addOnBeforeTemplate>
      <nz-select [(ngModel)]="queryKey">
        <nz-option *ngFor="let option of queryOptionList" [nzValue]="option.value" [nzLabel]="option.label"></nz-option>
      </nz-select>
    </ng-template>
    <ng-template #suffixIconSearch>
        <i nz-icon nzType="search"></i>
    </ng-template>
  </div>
  <div nz-col [nzSpan]="12" style="text-align: right;">
    <button nz-button (click)="test()">
      <i nz-icon nzType="search"></i>구글 로그인
    </button>
    <button nz-button (click)="getUserList()">
      <i nz-icon nzType="search"></i>조회
    </button>
    <nz-divider nzType="vertical"></nz-divider>
    <button nz-button (click)="newForm()">
      <i nz-icon nzType="form" nzTheme="outline"></i>신규
    </button>
    <nz-divider nzType="vertical"></nz-divider>
    <button nz-button nzDanger="true"
      nz-popconfirm nzPopconfirmTitle="삭제하시겠습니까?"
      (nzOnConfirm)="deleteUser()" (nzOnCancel)="false">
        <i nz-icon nzType="delete" nzTheme="outline"></i>삭제
    </button>
  </div>
</app-nz-search-area>

<h3 class="pgm-title">사용자 목록</h3>
<div class="grid-wrapper">
  <app-user-grid #userGrid
    (rowClicked)="selectGridRow($event)"
    (editButtonClicked)="editForm($event)"
    (rowDoubleClicked)="editForm($event)">
  </app-user-grid>
</div>

<nz-drawer
  [nzBodyStyle]="{ height: 'calc(100% - 55px)', overflow: 'auto', 'padding-bottom':'53px' }"
  [nzMaskClosable]="true"
  nzWidth="50%"
  [nzVisible]="drawerVisible"
  nzTitle="사용자 등록"
  (nzOnClose)="closeDrawer()">
    <app-user-form #userForm *nzDrawerContent
      [initLoadId]="this.selectedUserId"
      (formSaved)="getUserList()"
      (formDeleted)="getUserList()"
      (formClosed)="closeDrawer()">
    </app-user-form>
</nz-drawer>
